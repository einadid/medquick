# Enable the URL rewriting engine
RewriteEngine On

# Set the default index file
DirectoryIndex index.php

# Prevent directory listing
Options -Indexes

# --- Rules for removing .php extension ---
# 1. Check if the request is not for an existing file
RewriteCond %{REQUEST_FILENAME} !-f
# 2. Check if the request is not for an existing directory
RewriteCond %{REQUEST_FILENAME} !-d
# 3. Check if a .php file with that name exists
RewriteCond %{REQUEST_FILENAME}.php -f
# 4. If all conditions are met, internally rewrite the URL to add .php
RewriteRule ^(.*)$ $1.php [L]

# Block access to sensitive directories
RewriteRule ^(src|config|templates)/ - [F,L]

# Block access to this .htaccess file itself
<Files .htaccess>
    Require all denied
</Files>